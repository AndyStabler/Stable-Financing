<%= render 'nav_bar', :balance => @balance %>

<p id="notice"><%= notice %></p>
<div class="user-transfers">
  <h1>Transfers</h1>

  <div class="user-transfers-new">
    <a href="#" id="new-transfer-toggle">
      <i class="glyphicon <%= @transfer.errors.present? ? "glyphicon-minus" : "glyphicon-plus" %>"></i>
    </a>
    <%= render 'new_transfer_form', transfer: @transfer %>
  </div>

  <div class="options">
    <p id="options-in" class="selected">In</p>

    <p id="options-out" class="unselected">Out</p>
  </div>
  <div class="user-transfers-panel">
    <div id="user-transfers-in">
      <% @user.transfers.where(outgoing: false).each do |tr| %>
        <%= react_component('Transfer',
          {
            outgoing: tr.outgoing,
            reference: tr.reference,
            on: tr.on.to_date,
            amount: tr.amount,
            recurrence: tr.recurrence,
            id: tr.id
          })
        %>
      <% end %>
    </div>
    <div id="user-transfers-out">
      <% @user.transfers.where(outgoing: true).each do |tr| %>
        <%= react_component('Transfer', {
          outgoing: tr.outgoing,
          reference: tr.reference,
          on: tr.on.to_date,
          amount: tr.amount,
          recurrence: tr.recurrence,
          id: tr.id
        }) %>
      <% end %>
    </div>
  </div>
</div>
<div>
  <%= link_to "Download csv", user_path(@user, :format => :csv) %>
</div>
<div id="balance-data" style="float: left; width: 50%; height: 250px; overflow-y: scroll;">
</div>
<div id="selected-balance-info" style="float:left;">
</div>
<div class="user-data"
  data-json-url="<%= user_path @user %>.json"
  data-transfers-url="<%= user_transfers_path @user %>.json"
</div>

<!--Div that will hold the pie chart-->
<div id="chart_div"></div>
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
