<div class="user-header">
  <h1 class="user-title"><%= link_to @user.name, @user %></h1>

  <div class="balance-update">
    <%= render 'balance_update', balance: @balance, user: @user %>
  </div>
</div>

<p id="notice"><%= notice %></p>
<div class="user-transfers">
  <h1>Transfers</h1>

  <div class="user-transfers-new">
    <p id="user-transfer-new-button" class=<%= (defined?(@transfer) && @transfer.errors.any?) ? "open" : "closed" %>>New</p>
    <%= render 'new_transfer_form', transfer: defined?(@transfer) ? @transfer : Transfer.new %>
  </div>

  <div class="options">
    <p id="options-in" class="selected">In</p>

    <p id="options-out" class="unselected">Out</p>
  </div>
  <div class="user-transfers-panel">
    <div id="user-transfers-in">
      <% @user.transfers.where(outgoing: false).each do |tr| %>
        <%= react_component('Transfer',
          {
            outgoing: tr.outgoing,
            reference: tr.reference,
            on: tr.on.to_date,
            amount: tr.amount,
            recurrence: tr.recurrence,
            id: tr.id
          })
        %>
      <% end %>
    </div>
    <div id="user-transfers-out">
      <% @user.transfers.where(outgoing: true).each do |tr| %>
        <%= react_component('Transfer', {
          outgoing: tr.outgoing,
          reference: tr.reference,
          on: tr.on.to_date,
          amount: tr.amount,
          recurrence: tr.recurrence,
          id: tr.id
        }) %>
      <% end %>
    </div>
  </div>
</div>
<div>
  <%= link_to "Download csv", user_path(@user, :format => :csv) %>
</div>
<div id="balance-data" style="float: left; width: 50%; height: 250px; overflow-y: scroll;">
  <div id="loading-cat">
    <%= image_tag "loading-cat.gif" %>
    <h1>Sit tight while we chase down some numbers . . .</h1>
  </div>
</div>
<div id="selected-balance-info" style="position: fixed; right: 0;">

</div>
<div class="user-data"
  data-json-url="<%= user_path @user %>.json"
</div>

<!--Div that will hold the pie chart-->
<div id="chart_div"></div>
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
